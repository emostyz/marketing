
> marketing-deck-platform@1.0.0 dev
> next dev --turbopack

 ⚠ Warning: Found multiple lockfiles. Selecting /Users/emilmostrom/pnpm-lock.yaml.
   Consider removing the lockfiles at:
   * /Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/package-lock.json

   ▲ Next.js 15.4.0-canary.88 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.207:3000
   - Environments: .env.local
   - Experiments (use with caution):
     ✓ ppr
     ✓ nodeMiddleware
     ✓ clientSegmentCache

 ✓ Starting...
 ✓ Compiled middleware in 94ms
 ✓ Ready in 970ms
 ○ Compiling /_not-found/page ...
 ✓ Compiled /_not-found/page in 1132ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /_not-found. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /api/health 404 in 1309ms
 ✓ Compiled /api/upload in 384ms
Error: Route "/api/upload" used `cookies().get('sb-waddrfstpqkvdfwbxvfw-auth-token')`. `cookies()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getItemAsync (../../../src/lib/helpers.ts:129:30)
    at SupabaseAuthClient.__loadSession (../../src/GoTrueClient.ts:1316:46)
    at SupabaseAuthClient._useSession (../../src/GoTrueClient.ts:1274:32)
    at SupabaseAuthClient._emitInitialSession (../../src/GoTrueClient.ts:1876:22)
    at <unknown> (../../src/GoTrueClient.ts:1868:13)
    at <unknown> (../../src/GoTrueClient.ts:1206:25)
    at SupabaseAuthClient.lockNoOp [as lock] (../../src/GoTrueClient.ts:130:15)
    at SupabaseAuthClient._acquireLock (../../src/GoTrueClient.ts:1200:24)
    at <unknown> (../../src/GoTrueClient.ts:1867:17)
Error: Route "/api/upload" used `cookies().get('sb-waddrfstpqkvdfwbxvfw-auth-token.0')`. `cookies()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getItemAsync (../../../src/lib/helpers.ts:129:30)
    at SupabaseAuthClient.__loadSession (../../src/GoTrueClient.ts:1316:46)
    at SupabaseAuthClient._useSession (../../src/GoTrueClient.ts:1274:32)
    at SupabaseAuthClient._emitInitialSession (../../src/GoTrueClient.ts:1876:22)
    at <unknown> (../../src/GoTrueClient.ts:1868:13)
    at <unknown> (../../src/GoTrueClient.ts:1206:25)
    at SupabaseAuthClient.lockNoOp [as lock] (../../src/GoTrueClient.ts:130:15)
    at SupabaseAuthClient._acquireLock (../../src/GoTrueClient.ts:1200:24)
    at <unknown> (../../src/GoTrueClient.ts:1867:17)
Error: Route "/api/upload" used `cookies().get('sb-waddrfstpqkvdfwbxvfw-auth-token')`. `cookies()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getItemAsync (../../../src/lib/helpers.ts:129:30)
    at SupabaseAuthClient.__loadSession (../../src/GoTrueClient.ts:1316:46)
    at SupabaseAuthClient._useSession (../../src/GoTrueClient.ts:1274:32)
    at <unknown> (../../src/GoTrueClient.ts:1162:18)
    at <unknown> (../../src/GoTrueClient.ts:1184:23)
Error: Route "/api/upload" used `cookies().get('sb-waddrfstpqkvdfwbxvfw-auth-token.0')`. `cookies()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at getItemAsync (../../../src/lib/helpers.ts:129:30)
    at SupabaseAuthClient.__loadSession (../../src/GoTrueClient.ts:1316:46)
    at SupabaseAuthClient._useSession (../../src/GoTrueClient.ts:1274:32)
    at <unknown> (../../src/GoTrueClient.ts:1162:18)
    at <unknown> (../../src/GoTrueClient.ts:1184:23)
 POST /api/upload 401 in 565ms
 POST /api/upload 401 in 112ms
📊 File parsed successfully: {
  fileName: 'test-data.csv',
  rowCount: 6,
  columns: 4,
  dataQuality: 'excellent',
  timeSeriesDetected: true
}
 ✓ Compiled /api/presentations/session in 362ms
 POST /api/presentations/session 401 in 409ms
 POST /api/upload 200 in 499ms
 ✓ Compiled /api/openai/enhanced-analyze in 239ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 6,
  isArray: true,
  firstDataItem: [ 'Date', 'Revenue', 'Customers', 'Orders' ],
  contextKeys: [ 'businessType', 'industry', 'dataSource', 'analysisGoal' ],
  timeFrameKeys: [ 'start', 'end', 'comparisons', 'dataFrequency' ],
  requirementsKeys: [ 'slidesCount', 'presentationDuration', 'focusAreas', 'style' ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-01-01',
    end: '2024-06-01',
    label: '2024-01-01 to 2024-06-01'
  },
  analysisType: 'm/m',
  includeTrends: true,
  includeSeasonality: true,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 8,
  targetDuration: 15,
  structure: 'ai_suggested',
  keyPoints: [ 'revenue growth', 'customer acquisition', 'order trends' ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'storytelling',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
❌ EnhancedBrainV2: performInitialScan Error: TypeError: Cannot read properties of undefined (reading 'join')
    at EnhancedBrainV2.performInitialScan (lib/ai/enhanced-brain-v2.ts:421:41)
    at EnhancedBrainV2.analyzeData (lib/ai/enhanced-brain-v2.ts:346:37)
    at POST (app/api/openai/enhanced-analyze/route.ts:111:31)
  419 | - Data Description: ${context.description}
  420 | - Data Quality: ${context.dataQuality}
> 421 | - Influencing Factors: ${context.factors.join(', ')}
      |                                         ^
  422 |
  423 | TIME FRAME:
  424 | - Primary Period: ${timeFrame.primaryPeriod.start} to ${timeFrame.primaryPeriod.end}
Error name: TypeError
Error message: Cannot read properties of undefined (reading 'join')
❌ EnhancedBrainV2.analyzeData Error: TypeError: Cannot read properties of undefined (reading 'join')
    at EnhancedBrainV2.performInitialScan (lib/ai/enhanced-brain-v2.ts:421:41)
    at EnhancedBrainV2.analyzeData (lib/ai/enhanced-brain-v2.ts:346:37)
    at POST (app/api/openai/enhanced-analyze/route.ts:111:31)
  419 | - Data Description: ${context.description}
  420 | - Data Quality: ${context.dataQuality}
> 421 | - Influencing Factors: ${context.factors.join(', ')}
      |                                         ^
  422 |
  423 | TIME FRAME:
  424 | - Primary Period: ${timeFrame.primaryPeriod.start} to ${timeFrame.primaryPeriod.end}
Error name: TypeError
Error message: Cannot read properties of undefined (reading 'join')
Error stack: TypeError: Cannot read properties of undefined (reading 'join')
    at EnhancedBrainV2.performInitialScan (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/[root-of-the-server]__d2679152._.js:872:42)
    at EnhancedBrainV2.analyzeData (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/[root-of-the-server]__d2679152._.js:810:44)
    at POST (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/[root-of-the-server]__d2679152._.js:1496:36)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async AppRouteRouteModule.do (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:5:37894)
    at async AppRouteRouteModule.handle (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:5:45039)
    at async responseGenerator (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21627:38)
    at async AppRouteRouteModule.handleResponse (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:1:190411)
    at async handleResponse (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21689:32)
    at async handler (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21741:13)
    at async doRender (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1589:34)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1931:13)
    at async DevServer.renderPageComponent (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:2397:24)
    at async DevServer.renderToResponseImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:2437:32)
    at async DevServer.pipeImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1033:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/next-server.js:391:17)
    at async DevServer.handleRequestImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:924:17)
    at async /Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/dev/next-dev-server.js:398:20
    at async Span.traceAsyncFn (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/dev/next-dev-server.js:394:24)
    at async invokeRender (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:239:21)
    at async handleRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:436:24)
    at async requestHandlerImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:464:13)
    at async Server.requestListener (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/start-server.js:216:13)
❌ Enhanced analysis error: TypeError: Cannot read properties of undefined (reading 'join')
    at EnhancedBrainV2.performInitialScan (lib/ai/enhanced-brain-v2.ts:421:41)
    at EnhancedBrainV2.analyzeData (lib/ai/enhanced-brain-v2.ts:346:37)
    at POST (app/api/openai/enhanced-analyze/route.ts:111:31)
  419 | - Data Description: ${context.description}
  420 | - Data Quality: ${context.dataQuality}
> 421 | - Influencing Factors: ${context.factors.join(', ')}
      |                                         ^
  422 |
  423 | TIME FRAME:
  424 | - Primary Period: ${timeFrame.primaryPeriod.start} to ${timeFrame.primaryPeriod.end}
Error name: TypeError
Error message: Cannot read properties of undefined (reading 'join')
Error stack: TypeError: Cannot read properties of undefined (reading 'join')
    at EnhancedBrainV2.performInitialScan (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/[root-of-the-server]__d2679152._.js:872:42)
    at EnhancedBrainV2.analyzeData (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/[root-of-the-server]__d2679152._.js:810:44)
    at POST (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/[root-of-the-server]__d2679152._.js:1496:36)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async AppRouteRouteModule.do (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:5:37894)
    at async AppRouteRouteModule.handle (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:5:45039)
    at async responseGenerator (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21627:38)
    at async AppRouteRouteModule.handleResponse (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:1:190411)
    at async handleResponse (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21689:32)
    at async handler (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21741:13)
    at async doRender (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1589:34)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1931:13)
    at async DevServer.renderPageComponent (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:2397:24)
    at async DevServer.renderToResponseImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:2437:32)
    at async DevServer.pipeImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1033:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/next-server.js:391:17)
    at async DevServer.handleRequestImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:924:17)
    at async /Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/dev/next-dev-server.js:398:20
    at async Span.traceAsyncFn (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/dev/next-dev-server.js:394:24)
    at async invokeRender (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:239:21)
    at async handleRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:436:24)
    at async requestHandlerImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:464:13)
    at async Server.requestListener (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/start-server.js:216:13)
Full error object: {}
 POST /api/openai/enhanced-analyze 500 in 430ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 6,
  isArray: true,
  firstDataItem: [ 'Date', 'Revenue', 'Customers', 'Orders' ],
  contextKeys: [
    'businessType',
    'industry',
    'businessContext',
    'description',
    'dataQuality',
    'factors',
    'dataSource',
    'analysisGoal'
  ],
  timeFrameKeys: [ 'start', 'end', 'comparisons', 'dataFrequency' ],
  requirementsKeys: [ 'slidesCount', 'presentationDuration', 'focusAreas', 'style' ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-01-01',
    end: '2024-06-01',
    label: '2024-01-01 to 2024-06-01'
  },
  analysisType: 'm/m',
  includeTrends: true,
  includeSeasonality: true,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 8,
  targetDuration: 15,
  structure: 'ai_suggested',
  keyPoints: [ 'revenue growth', 'customer acquisition', 'order trends' ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'storytelling',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 4 insights
 POST /api/openai/enhanced-analyze 200 in 119090ms
 ○ Compiling /deck-builder/new ...
 ✓ Compiled /deck-builder/new in 526ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /deck-builder/new. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /deck-builder/new 200 in 637ms
TypeError: Failed to parse body as FormData.
    at async POST (app/api/upload/route.ts:10:19)
   8 |
   9 | export async function POST(request: NextRequest) {
> 10 |   const formData = await request.formData()
     |                   ^
  11 |   const file = formData.get('file') as File
  12 |   
  13 |   if (!file) {
 POST /api/upload 500 in 99ms
TypeError: Failed to parse body as FormData.
    at async POST (app/api/upload/route.ts:10:19)
   8 |
   9 | export async function POST(request: NextRequest) {
> 10 |   const formData = await request.formData()
     |                   ^
  11 |   const file = formData.get('file') as File
  12 |   
  13 |   if (!file) {
 POST /api/upload 500 in 90ms
TypeError: Failed to parse body as FormData.
    at async POST (app/api/upload/route.ts:10:19)
   8 |
   9 | export async function POST(request: NextRequest) {
> 10 |   const formData = await request.formData()
     |                   ^
  11 |   const file = formData.get('file') as File
  12 |   
  13 |   if (!file) {
 POST /api/upload 500 in 84ms
📊 File parsed successfully: {
  fileName: 'test-data.csv',
  rowCount: 6,
  columns: 4,
  dataQuality: 'excellent',
  timeSeriesDetected: true
}
 POST /api/presentations/session 401 in 35ms
 POST /api/upload 200 in 79ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 6,
  isArray: true,
  firstDataItem: [ 'Date', 'Revenue', 'Customers', 'Orders' ],
  contextKeys: [
    'businessType',
    'industry',
    'businessContext',
    'description',
    'dataQuality',
    'factors',
    'dataSource',
    'analysisGoal'
  ],
  timeFrameKeys: [ 'start', 'end', 'comparisons', 'dataFrequency' ],
  requirementsKeys: [ 'slidesCount', 'presentationDuration', 'focusAreas', 'style' ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-01-01',
    end: '2024-06-01',
    label: '2024-01-01 to 2024-06-01'
  },
  analysisType: 'm/m',
  includeTrends: true,
  includeSeasonality: true,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 8,
  targetDuration: 15,
  structure: 'ai_suggested',
  keyPoints: [ 'revenue growth', 'customer acquisition', 'order trends' ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'storytelling',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
 POST /api/openai/enhanced-analyze 200 in 119917ms
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 4 insights
CSV parsing warnings: [
  {
    type: 'FieldMismatch',
    code: 'TooFewFields',
    message: 'Too few fields: expected 11 fields but parsed 1',
    row: 29
  }
]
📊 File parsed successfully: {
  fileName: 'sales_performance_q4_2024.csv',
  rowCount: 30,
  columns: 11,
  dataQuality: 'excellent',
  timeSeriesDetected: true
}
 POST /api/presentations/session 401 in 53ms
 POST /api/upload 200 in 118ms
 ⨯ ./lib/ai/enhanced-brain-v2.ts:889:45
Parsing ecmascript source code failed
[0m [90m 887 |[39m [32m    return slides.map((slide: any) => ({[39m
 [90m 888 |[39m [32m      ...slide,[39m
[31m[1m>[22m[39m[90m 889 |[39m [32m      id: slide.id || `[39mslide_${[33mDate[39m[33m.[39mnow()}_${[33mMath[39m[33m.[39mrandom()}[32m`[39m
 [90m     |[39m                                             [31m[1m^[22m[39m
 [90m 890 |[39m [32m    }))[39m
 [90m 891 |[39m [32m  }[39m
 [90m 892 |[39m [32m[39m[0m

Unexpected token `{`. Expected * for generator, private key, identifier or async

Example import trace:
  ./lib/ai/enhanced-brain-v2.ts
  ./app/api/openai/enhanced-analyze/route.ts


 ○ Compiling /_error ...
 ✓ Compiled /_error in 651ms
 POST /api/openai/enhanced-analyze 500 in 781ms
 ⨯ ./lib/ai/enhanced-brain-v2.ts:903:10
Parsing ecmascript source code failed
[0m [90m 901 |[39m [32m    const prompt = `[39m[33mYou[39m are integrating user feedback to refine the analysis and presentation[33m.[39m
 [90m 902 |[39m
[31m[1m>[22m[39m[90m 903 |[39m [33mORIGINAL[39m [33mRESULTS[39m[33m:[39m
 [90m     |[39m          [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
 [90m 904 |[39m ${[33mJSON[39m[33m.[39mstringify(result[33m,[39m [36mnull[39m[33m,[39m [35m2[39m)}
 [90m 905 |[39m
 [90m 906 |[39m [33mUSER[39m [33mFEEDBACK[39m[33m:[39m[0m

Expected ';', '}' or <eof>

Example import trace:
  ./lib/ai/enhanced-brain-v2.ts
  ./app/api/openai/enhanced-analyze/route.ts


 POST /api/openai/enhanced-analyze 500 in 71ms
 ⨯ ./lib/ai/enhanced-brain-v2.ts:1012:3
Parsing ecmascript source code failed
[0m [90m 1010 |[39m [32m    return qualityScores[context.dataQuality] || 50[39m
 [90m 1011 |[39m [32m  }[39m
[31m[1m>[22m[39m[90m 1012 |[39m [32m} [39m
 [90m      |[39m   [31m[1m^[22m[39m[0m

Unexpected eof

Example import trace:
  ./lib/ai/enhanced-brain-v2.ts
  ./app/api/openai/enhanced-analyze/route.ts


 POST /api/openai/enhanced-analyze 500 in 67ms
🧠 Enhanced Analysis - Starting request processing
❌ Enhanced analysis error: SyntaxError: Unexpected non-whitespace character after JSON at position 2114 (line 1 column 2115)
    at JSON.parse (<anonymous>)
    at async POST (app/api/openai/enhanced-analyze/route.ts:8:17)
   6 |     console.log('🧠 Enhanced Analysis - Starting request processing')
   7 |     
>  8 |     const body = await request.json()
     |                 ^
   9 |     console.log('🧠 Enhanced Analysis - Request body received:', Object.keys(body))
  10 |     
  11 |     const {
Error name: SyntaxError
Error message: Unexpected non-whitespace character after JSON at position 2114 (line 1 column 2115)
Error stack: SyntaxError: Unexpected non-whitespace character after JSON at position 2114 (line 1 column 2115)
    at JSON.parse (<anonymous>)
    at parseJSONFromBytes (node:internal/deps/undici/undici:5738:19)
    at successSteps (node:internal/deps/undici/undici:5719:27)
    at fullyReadBody (node:internal/deps/undici/undici:4609:9)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async consumeBody (node:internal/deps/undici/undici:5728:7)
    at async POST (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/[root-of-the-server]__d2679152._.js:1419:22)
    at async AppRouteRouteModule.do (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:5:37894)
    at async AppRouteRouteModule.handle (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:5:45039)
    at async responseGenerator (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21627:38)
    at async AppRouteRouteModule.handleResponse (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/compiled/next-server/app-route-turbo-experimental.runtime.dev.js:1:190411)
    at async handleResponse (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21689:32)
    at async handler (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/.next/server/chunks/node_modules_c36fdaf9._.js:21741:13)
    at async doRender (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1589:34)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1931:13)
    at async DevServer.renderPageComponent (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:2397:24)
    at async DevServer.renderToResponseImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:2437:32)
    at async DevServer.pipeImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:1033:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/next-server.js:391:17)
    at async DevServer.handleRequestImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/base-server.js:924:17)
    at async /Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/dev/next-dev-server.js:398:20
    at async Span.traceAsyncFn (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/dev/next-dev-server.js:394:24)
    at async invokeRender (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:239:21)
    at async handleRequest (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:436:24)
    at async requestHandlerImpl (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/router-server.js:464:13)
    at async Server.requestListener (/Users/emilmostrom/Desktop/marketing-deck-platform/marketing-deck-platform/node_modules/next/dist/server/lib/start-server.js:216:13)
Full error object: {}
 POST /api/openai/enhanced-analyze 500 in 224ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-31',
    label: '2024-10-01 to 2024-10-31'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 12,
  targetDuration: 20,
  structure: 'ai_suggested',
  keyPoints: [
    'Revenue Performance',
    'Sales Efficiency',
    'Lead Source ROI',
    'Regional Analysis',
    'Product Performance',
    'Strategic Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 3 insights
 POST /api/openai/enhanced-analyze 200 in 183623ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-31',
    label: '2024-10-01 to 2024-10-31'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 15,
  targetDuration: 25,
  structure: 'ai_suggested',
  keyPoints: [
    'Campaign ROI Analysis',
    'Channel Performance Comparison',
    'Audience Segmentation Insights',
    'Budget Optimization',
    'Creative Performance',
    'Attribution Modeling',
    'Strategic Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
 POST /api/openai/enhanced-analyze 200 in 120156ms
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 3 insights
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-31',
    label: '2024-10-01 to 2024-10-31'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 15,
  targetDuration: 25,
  structure: 'ai_suggested',
  keyPoints: [
    'Campaign ROI Analysis',
    'Channel Performance Comparison',
    'Audience Segmentation Insights',
    'Budget Optimization',
    'Creative Performance',
    'Attribution Modeling',
    'Strategic Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
 POST /api/openai/enhanced-analyze 200 in 180183ms
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-31',
    label: '2024-10-01 to 2024-10-31'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 15,
  targetDuration: 25,
  structure: 'ai_suggested',
  keyPoints: [
    'Campaign ROI Analysis',
    'Channel Performance Comparison',
    'Audience Segmentation Insights',
    'Budget Optimization',
    'Creative Performance',
    'Attribution Modeling',
    'Strategic Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 3 insights
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 2 insights
 POST /api/openai/enhanced-analyze 200 in 181720ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-10',
    label: '2024-10-01 to 2024-10-10'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 18,
  targetDuration: 30,
  structure: 'ai_suggested',
  keyPoints: [
    'Revenue Growth Analysis',
    'Profitability Optimization',
    'Cash Flow Management',
    'Customer Economics',
    'Department Performance',
    'Strategic KPIs',
    'Investment Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
 ○ Compiling / ...
 ✓ Compiled / in 1150ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET / 200 in 1408ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 711ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /dashboard. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
Error loading drafts: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "1"'
}
 GET /dashboard 200 in 1108ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /deck-builder/new. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /deck-builder/new 200 in 103ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /dashboard. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
Error loading drafts: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "1"'
}
 GET /dashboard 200 in 173ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /deck-builder/new. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /deck-builder/new 200 in 99ms
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 3 insights
 POST /api/openai/enhanced-analyze 200 in 167545ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-08',
    label: '2024-10-01 to 2024-10-08'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 14,
  targetDuration: 25,
  structure: 'ai_suggested',
  keyPoints: [
    'Process Efficiency Analysis',
    'Automation Impact Assessment',
    'Resource Optimization',
    'Quality Management',
    'Bottleneck Identification',
    'Employee Performance',
    'Strategic Improvement Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 2 insights
 POST /api/openai/enhanced-analyze 200 in 181164ms
 ✓ Compiled in 170ms
 ⚠ Fast Refresh had to perform a full reload when ./lib/auth/auth-context.tsx changed. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 ⚠ Unsupported metadata viewport is configured in metadata export in /deck-builder/new. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /deck-builder/new 200 in 530ms
 ✓ Compiled /favicon.ico in 240ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 536ms
 ⚠ Fast Refresh had to perform a full reload when ./lib/auth/oauth-config.ts changed. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 ✓ Compiled in 57ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /deck-builder/new. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /deck-builder/new 200 in 329ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 301ms
 ⚠ Fast Refresh had to perform a full reload when ./lib/auth/oauth-config.ts changed. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 ✓ Compiled in 60ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /deck-builder/new. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /deck-builder/new 200 in 513ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 315ms
 ⚠ Fast Refresh had to perform a full reload when ./lib/auth/oauth-config.ts changed. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 ✓ Compiled in 88ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /deck-builder/new. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /deck-builder/new 200 in 441ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 329ms
 ✓ Compiled middleware in 10ms
 ✓ Compiled in 126ms
 ○ Compiling /auth/login ...
 ✓ Compiled /auth/login in 585ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 835ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 532ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 326ms
 ✓ Compiled in 828ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 192ms
 POST /api/upload 401 in 158ms
 ✓ Compiled in 120ms
 ⚠ Fast Refresh had to perform a full reload when ./lib/supabase/enhanced-client.ts changed. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 946ms
 GET /auth/login 200 in 935ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 360ms
 ✓ Compiled /api/auth/login in 356ms
 POST /api/auth/login 200 in 569ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 340ms
 ✓ Compiled in 10ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-08',
    label: '2024-10-01 to 2024-10-08'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 16,
  targetDuration: 30,
  structure: 'ai_suggested',
  keyPoints: [
    'Customer Segmentation Analysis',
    'Purchase Behavior Patterns',
    'Engagement Optimization',
    'Retention Strategy',
    'Satisfaction & Experience',
    'Lifetime Value Analysis',
    'Strategic CX Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 2 insights
 POST /api/openai/enhanced-analyze 200 in 191396ms
 ✓ Compiled middleware in 109ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 1011ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 233ms
 ✓ Compiled middleware in 38ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 298ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 273ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-08',
    label: '2024-10-01 to 2024-10-08'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 18,
  targetDuration: 35,
  structure: 'ai_suggested',
  keyPoints: [
    'Market Share Analysis',
    'Competitive Positioning',
    'Innovation Landscape',
    'Investment Strategies',
    'Threat Assessment',
    'Strategic Opportunities',
    'Competitive Response Plan'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
 ✓ Compiled in 152ms
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
 ✓ Compiled in 399ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 300ms
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 3 insights
 POST /api/openai/enhanced-analyze 200 in 184118ms
 ✓ Compiled middleware in 21ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /_not-found. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 404 in 459ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 277ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 595ms
 ✓ Compiled in 541ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 325ms
 ✓ Compiled in 177ms
 ✓ Compiled middleware in 9ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 763ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /_not-found. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 404 in 292ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 752ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-08',
    label: '2024-10-01 to 2024-10-08'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 14,
  targetDuration: 25,
  structure: 'ai_suggested',
  keyPoints: [
    'Product Revenue Analysis',
    'Profitability Assessment',
    'Market Share Trends',
    'Customer Satisfaction Analysis',
    'Inventory & Operations',
    'Marketing ROI',
    'Strategic Product Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
 POST /api/openai/enhanced-analyze 200 in 120313ms
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 3 insights
 ✓ Compiled middleware in 21ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 2484ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 381ms
 ✓ Compiled middleware in 114ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 444ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 389ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-08',
    label: '2024-10-01 to 2024-10-08'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 16,
  targetDuration: 30,
  structure: 'ai_suggested',
  keyPoints: [
    'Regional Performance Analysis',
    'Market Penetration Assessment',
    'Competitive Landscape',
    'Growth Opportunity Mapping',
    'Operational Efficiency',
    'Risk & Regulatory Analysis',
    'Strategic Expansion Recommendations'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
 ✓ Compiled middleware in 20ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 613ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 565ms
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
 ✓ Compiled middleware in 330ms
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
 ⚠ Unsupported metadata viewport is configured in metadata export in /_not-found. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 404 in 661ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 3575ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 968ms
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
 ✓ Compiled in 723ms
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
 ✓ Compiled middleware in 120ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /_not-found. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 404 in 1717ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 1050ms
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 12928ms
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 2 insights
 POST /api/openai/enhanced-analyze 200 in 151915ms
🧠 Enhanced Analysis - Starting request processing
🧠 Enhanced Analysis - Request body received: [ 'data', 'context', 'timeFrame', 'requirements' ]
🧠 Enhanced Analysis - Extracted data: {
  dataLength: 1,
  isArray: true,
  firstDataItem: [ 'fileId', 'fileName', 'data', 'columns', 'rowCount', 'dataType' ],
  contextKeys: [
    'industry',
    'targetAudience',
    'businessContext',
    'description',
    'factors'
  ],
  timeFrameKeys: [
    'start',
    'end',
    'dataFrequency',
    'analysisType',
    'comparisons',
    'granularity',
    'focusPeriods'
  ],
  requirementsKeys: [
    'slidesCount',
    'presentationDuration',
    'focusAreas',
    'style',
    'includeCharts',
    'includeExecutiveSummary',
    'includeComparisons',
    'comparisonTypes'
  ]
}
🧠 Enhanced Analysis - All validations passed, initializing brain
🧠 Enhanced Analysis - Transformed timeFrame: {
  primaryPeriod: {
    start: '2024-10-01',
    end: '2024-10-03',
    label: '2024-10-01 to 2024-10-03'
  },
  analysisType: 'custom',
  includeTrends: true,
  includeSeasonality: false,
  includeOutliers: true
}
🧠 Enhanced Analysis - Transformed requirements: {
  slideCount: 20,
  targetDuration: 45,
  structure: 'ai_suggested',
  keyPoints: [
    'Executive Summary',
    'Financial Performance',
    'Operational Excellence',
    'Customer Success Metrics',
    'Strategic Initiative Progress',
    'Risk Assessment',
    'Forward-Looking Strategy',
    'Resource Allocation Review'
  ],
  slideDescriptions: [],
  audienceType: 'executive',
  presentationStyle: 'formal',
  includeAppendix: true,
  includeSources: true
}
🧠 Enhanced Analysis - Brain initialized, performing analysis...
🧠 Enhanced Analysis - Processing file data array
🧠 Enhanced Analysis - Flattened data length: 2
🧠 EnhancedBrainV2: Starting analysis...
🧠 EnhancedBrainV2: Input validation passed
🧠 EnhancedBrainV2: Phase 1 - Initial Data Scan
🧠 EnhancedBrainV2: performInitialScan - Starting...
🧠 EnhancedBrainV2: performInitialScan - Making OpenAI API call...
 ✓ Compiled in 680ms
🧠 EnhancedBrainV2: performInitialScan - OpenAI response received
🧠 EnhancedBrainV2: performInitialScan - Parsing JSON response...
🧠 EnhancedBrainV2: performInitialScan - Completed successfully
🧠 EnhancedBrainV2: Phase 2 - Deep Pattern Analysis
 ✓ Compiled in 658ms
🧠 EnhancedBrainV2: Phase 3 - Novel Insight Generation
 ✓ Compiled in 378ms
🧠 EnhancedBrainV2: Phase 4 - Narrative Development
 ✓ Compiled in 270ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 934ms
🧠 EnhancedBrainV2: Phase 5 - Slide Structure Creation
 POST /api/openai/enhanced-analyze 200 in 180137ms
🧠 EnhancedBrainV2: Phase 7 - Final Validation and Recommendations
 ○ Compiling middleware ...
 ✓ Compiled middleware in 5.2s
🧠 EnhancedBrainV2: Analysis completed successfully
🧠 Enhanced Analysis - Completed with 2 insights
 ○ Compiling middleware ...
 ✓ Compiled middleware in 6.9s
 ⚠ Unsupported metadata viewport is configured in metadata export in /_not-found. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 POST /api/openai/enhanced-analyze 404 in 7000ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 6243ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 660ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 601ms
 ⚠ Unsupported metadata viewport is configured in metadata export in /auth/login. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /auth/login 200 in 617ms
 ✓ Compiled middleware in 269ms
 GET /favicon.ico 200 in 1311ms
 ✓ Compiled middleware in 40ms
 ✓ Compiled in 796ms
[?25h
